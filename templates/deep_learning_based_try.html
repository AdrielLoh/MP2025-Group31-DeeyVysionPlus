<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Try Deep Learning Detection</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/new_styles.css') }}">
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let form = document.getElementById("upload-form");
            let spinner = document.getElementById("loadingSpinner");
            let submitButton = document.getElementById("submitButton");
            let dvurlSubmit = document.getElementById("dvurl-submit");

            form.addEventListener("submit", function(event) {
                event.preventDefault();

                // Disable the button and change text
                submitButton.disabled = true;
                dvurlSubmit.disabled = true;
                submitButton.innerText = "Processing...";

                // Show the spinner
                spinner.style.display = "block";

                // Submit the form normally
                form.setAttribute("action", "/deep_learning_static");
                form.setAttribute("method", "POST");
                form.submit();
                return;
            });
        });
    </script>
</head>
<body>
    <header>
        <div id="navbar-placeholder"></div>
    </header>

    <!-- Hero Section -->
    <section class="try-hero">
        <div class="hero-background">
            <div class="animated-pulse"></div>
        </div>
        <div class="hero-content">
            <div class="hero-icon">
                <svg width="60" height="60" viewBox="0 0 24 24" fill="none">
                    <!-- Neural Network for deep learning -->
                    <!-- Input layer nodes -->
                    <circle cx="3" cy="6" r="1.5" stroke="#667eea" stroke-width="1.5" fill="url(#nodeGradient)">
                        <animate attributeName="r" values="1.5;2;1.5" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="3" cy="12" r="1.5" stroke="#667eea" stroke-width="1.5" fill="url(#nodeGradient)">
                        <animate attributeName="r" values="1.5;2;1.5" dur="2s" repeatCount="indefinite" begin="0.3s"/>
                    </circle>
                    <circle cx="3" cy="18" r="1.5" stroke="#667eea" stroke-width="1.5" fill="url(#nodeGradient)">
                        <animate attributeName="r" values="1.5;2;1.5" dur="2s" repeatCount="indefinite" begin="0.6s"/>
                    </circle>
                    
                    <!-- Hidden layer nodes -->
                    <circle cx="12" cy="4" r="1.2" stroke="#764ba2" stroke-width="1.5" fill="url(#hiddenGradient)">
                        <animate attributeName="r" values="1.2;1.7;1.2" dur="2.5s" repeatCount="indefinite" begin="0.5s"/>
                    </circle>
                    <circle cx="12" cy="8" r="1.2" stroke="#764ba2" stroke-width="1.5" fill="url(#hiddenGradient)">
                        <animate attributeName="r" values="1.2;1.7;1.2" dur="2.5s" repeatCount="indefinite" begin="0.8s"/>
                    </circle>
                    <circle cx="12" cy="12" r="1.2" stroke="#764ba2" stroke-width="1.5" fill="url(#hiddenGradient)">
                        <animate attributeName="r" values="1.2;1.7;1.2" dur="2.5s" repeatCount="indefinite" begin="1.1s"/>
                    </circle>
                    <circle cx="12" cy="16" r="1.2" stroke="#764ba2" stroke-width="1.5" fill="url(#hiddenGradient)">
                        <animate attributeName="r" values="1.2;1.7;1.2" dur="2.5s" repeatCount="indefinite" begin="1.4s"/>
                    </circle>
                    <circle cx="12" cy="20" r="1.2" stroke="#764ba2" stroke-width="1.5" fill="url(#hiddenGradient)">
                        <animate attributeName="r" values="1.2;1.7;1.2" dur="2.5s" repeatCount="indefinite" begin="1.7s"/>
                    </circle>
                    
                    <!-- Output layer nodes -->
                    <circle cx="21" cy="8" r="1.8" stroke="#4facfe" stroke-width="1.5" fill="url(#outputGradient)">
                        <animate attributeName="r" values="1.8;2.3;1.8" dur="3s" repeatCount="indefinite" begin="1s"/>
                    </circle>
                    <circle cx="21" cy="16" r="1.8" stroke="#4facfe" stroke-width="1.5" fill="url(#outputGradient)">
                        <animate attributeName="r" values="1.8;2.3;1.8" dur="3s" repeatCount="indefinite" begin="1.5s"/>
                    </circle>
                    
                    <!-- Connections (weights) with data flow animation -->
                    <!-- Input to hidden connections -->
                    <line x1="4.5" y1="6" x2="10.5" y2="4" stroke="#667eea" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2s" repeatCount="indefinite"/>
                    </line>
                    <line x1="4.5" y1="6" x2="10.5" y2="8" stroke="#667eea" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2s" repeatCount="indefinite" begin="0.2s"/>
                    </line>
                    <line x1="4.5" y1="12" x2="10.5" y2="12" stroke="#667eea" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2s" repeatCount="indefinite" begin="0.4s"/>
                    </line>
                    <line x1="4.5" y1="18" x2="10.5" y2="16" stroke="#667eea" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2s" repeatCount="indefinite" begin="0.6s"/>
                    </line>
                    <line x1="4.5" y1="18" x2="10.5" y2="20" stroke="#667eea" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2s" repeatCount="indefinite" begin="0.8s"/>
                    </line>
                    
                    <!-- Hidden to output connections -->
                    <line x1="13.2" y1="4" x2="19.2" y2="8" stroke="#764ba2" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2.5s" repeatCount="indefinite" begin="1s"/>
                    </line>
                    <line x1="13.2" y1="8" x2="19.2" y2="8" stroke="#764ba2" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2.5s" repeatCount="indefinite" begin="1.2s"/>
                    </line>
                    <line x1="13.2" y1="12" x2="19.2" y2="16" stroke="#764ba2" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2.5s" repeatCount="indefinite" begin="1.4s"/>
                    </line>
                    <line x1="13.2" y1="16" x2="19.2" y2="16" stroke="#764ba2" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2.5s" repeatCount="indefinite" begin="1.6s"/>
                    </line>
                    <line x1="13.2" y1="20" x2="19.2" y2="16" stroke="#764ba2" stroke-width="1" opacity="0.6">
                        <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2.5s" repeatCount="indefinite" begin="1.8s"/>
                    </line>
                    
                    <!-- Data flow particles -->
                    <circle cx="3" cy="6" r="0.5" fill="#4facfe" opacity="0.8">
                        <animateMotion dur="3s" repeatCount="indefinite">
                            <path d="M0,0 L9,-2 L18,2"/>
                        </animateMotion>
                        <animate attributeName="opacity" values="0;1;0" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    
                    <defs>
                        <linearGradient id="nodeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#667eea;stop-opacity:0.8" />
                            <stop offset="100%" style="stop-color:#764ba2;stop-opacity:0.9" />
                        </linearGradient>
                        <linearGradient id="hiddenGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#764ba2;stop-opacity:0.8" />
                            <stop offset="100%" style="stop-color:#f093fb;stop-opacity:0.9" />
                        </linearGradient>
                        <radialGradient id="outputGradient" cx="50%" cy="50%" r="50%">
                            <stop offset="0%" style="stop-color:#4facfe;stop-opacity:0.9" />
                            <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:0.7" />
                        </radialGradient>
                    </defs>
                </svg>
                <div class="pulse-indicator"></div>
            </div>
            <h1>Try Deep Learning-Based Detection</h1>
            <p class="hero-description">Deep Learning-Based detection uses a deep learning neural network to detect deepfakes by identifying patterns. Results may vary based on deepfake type and lighting conditions, and should not be taken as the complete truth.</p>
        </div>
    </section>

    <section class="try-container">
        <div class="detection-methods">
             <!-- Video URL Submission Method -->
            <div class="detection-method dvurl-method">
                <div class="method-header">
                    <div class="method-icon-try">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                            <!-- Link/URL Icon -->
                            <path d="M17 7a5 5 0 0 1 0 7l-1 1m-4-1a5 5 0 1 1 0-7l1-1" stroke="#764ba2" stroke-width="2"/>
                            <path d="M8 16a6 6 0 1 1 8 0M8 8a6 6 0 0 1 8 8" stroke="#667eea" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="method-text">
                        <h2 class="method-title">Submit Video URL</h2>
                        <p class="method-description">
                            Paste a YouTube, Instagram, or TikTok video link.<br>
                            <b>Only public and short videos are accepted (max 90 seconds).</b>
                        </p>
                    </div>
                </div>
                <form id="dvurl-form" class="dvurl-form" method="POST" action="/deep_learning_static" autocomplete="off" style="display: flex; flex-direction: column; gap: 2rem;">
                    <div class="dvurl-input-container">
                        <input type="url" name="video_url" id="dvurl-input" class="dvurl-input" 
                            placeholder="Paste video URL (e.g. https://...)" 
                            pattern="https?://.*" required 
                            style="width: 100%; padding: 1rem 1.2rem; border-radius: 12px; border: 1px solid var(--glass-border); background: var(--card-bg); color: var(--text-primary); font-size: 1.1rem;">
                        <span class="dvurl-hint">Supports most social media sites. Visit <a href="/allowed_urls">this page</a> for the full list.</span>
                    </div>
                    <div style="display: flex; gap: 1.5rem; align-items: center;">
                        <button type="submit" id="dvurl-submit" class="analyze-button dvurl-submit">
                            <span>Analyze URL</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M5 12h14m-7-7l7 7-7 7" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </button>
                    </div>
                    <div id="dvurl-loading" class="loading-spinner dvurl-loading" style="display: none;">
                        <div class="spinner-container"><div class="spinner"></div></div>
                        <div class="loading-text">
                            <h4>Fetching & Processing video...</h4>
                            <p>Please <b>do not</b> refresh or leave this page.</p>
                        </div>
                    </div>
                </form>
            </div>

            <!-- File Upload Method -->
            <div class="detection-method upload-method">
                <div class="method-header">
                    <div class="method-icon-try">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2"/>
                            <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2"/>
                            <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2"/>
                            <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2"/>
                            <polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="method-text">
                        <h2 class="method-title">Upload Video File</h2>
                        <p class="method-description">Upload a video file from your device for analysis. Supports most common video formats (Max 100 MB).</p>
                    </div>
                </div>
                
                <form id="upload-form" enctype="multipart/form-data" class="upload-form">
                    <div id="dropbox" class="dropbox">
                        <div class="upload-icon">📁</div>
                        <div class="upload-content">
                            <h3>Drop your video here</h3>
                            <p>or click to browse files</p>
                            <span class="file-types">MP4, AVI, MOV, WebM supported</span>
                        </div>
                        <input type="file" name="file" id="file" accept="video/*" required>
                        <video id="video-preview" controls style="display: none;"></video>
                    </div>
                    <button type="submit" id="submitButton" class="analyze-button">
                        <span>Analyze Video</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M5 12h14m-7-7l7 7-7 7" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <div id="loadingSpinner" class="loading-spinner">
                        <div class="spinner-container">
                            <div class="spinner"></div>
                            <div class="processing-waves">
                                <div class="wave wave-1"></div>
                                <div class="wave wave-2"></div>
                                <div class="wave wave-3"></div>
                            </div>
                        </div>
                        <div class="loading-text">
                            <h4>Processing video...</h4>
                            <p>Model is performing prediction... Please <b>Do not</b> refresh or leave this page!</p>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Webcam Detection Method -->
            <div class="detection-method webcam-method" id="webcamSection">
                <div class="method-header">
                    <div class="method-icon-try">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2v11z" stroke="currentColor" stroke-width="2"/>
                            <circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="method-text">
                        <h2 class="method-title">Live Webcam Detection</h2>
                        <p class="method-description">Use your webcam for real-time detection. Record a short video clip and analyze it instantly.</p>
                    </div>
                </div>
                
                <div class="webcam-controls">
                    <div class="camera-selection">
                        <label for="videoSource">Select Camera:</label>
                        <select id="videoSource"></select>
                    </div>
                    
                    <div class="webcam-preview-container">
                        <video id="webcam-preview" width="600" autoplay muted style="display: none;"></video>
                        <div class="preview-placeholder">
                            <div class="camera-icon">📹</div>
                            <p>Camera preview will appear here</p>
                        </div>
                    </div>
                    
                    <div class="webcam-buttons">
                        <button id="startWebcamBtn" class="webcam-button start-btn">
                            <span>Start Recording</span>
                            <div class="record-indicator"></div>
                        </button>
                        <button id="stopWebcamBtn" class="webcam-button stop-btn" disabled>
                            <span>Stop & Analyze</span>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="red">
                                <rect x="6" y="6" width="12" height="12" stroke="red" stroke-width="2"/>
                            </svg>
                        </button>
                    </div>
                    
                    <div id="webcamSpinner" class="webcam-loading">
                        <div class="spinner-container">
                            <div class="spinner"></div>
                        </div>
                        <div class="loading-text">
                            <h4>Processing live video...</h4>
                            <p>Model is performing prediction... Please <b>Do not</b> refresh or leave this page!</p>
                        </div>
                    </div>
                </div>
                
                <form id="webcamUploadForm" class="webcam-upload-form" method="POST" enctype="multipart/form-data" action="/deep_learning_static" style="display:none;">
                    <input type="file" name="file" id="webcamFileInput" style="display: none;">
                    <button type="submit" id="webcamSubmit" class="webcam-button webcam-upload-button">UPLOAD RECORDING</button>
                </form>
            </div>
        </div>
    </section>
    <footer>
        <div id="footer-placeholder"></div>
    </footer>
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
    <script src="../static/js/handle-upload.js"></script>
    <script src="../static/js/live-webcam.js"></script>
</body>
</html>