<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detection Results</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <header>
        <div id="navbar-placeholder"></div>
    </header>
    <div class="content">
        <button class="back-button" onclick="deleteFilesAndGoBack();">‚Üê Back</button>
        <h1>Deepfake Detection Results</h1>

        {% if analysis_type == 'audio' %}
            <h2>Result: <b style="color: {% if result == 'Bonafide' %}green{% elif result == 'Spoof' %}red{% else %}white{% endif %};">
                {{ result }}
                </b></h2>
            <p>Prediction score: {{ prediction_value }}</p>
            {% if mel_spectrogram_path %}
                <div class="graph-container wide-section">
                    <h2>Mel Spectrogram</h2>
                    <p class="graph-description">This graph visualizes the distribution of frequencies and energy distributions in the audio over time, helping to analyze unusual patterns that may indicate a deepfake.</p>
                    <img src="{{ url_for('static', filename=mel_spectrogram_path) }}" alt="Mel Spectrogram">
                </div>
            {% endif %}
            {% if mfcc_path %}
                <div class="graph-container wide-section">
                    <h2>Mel Frequency Cepstral Coefficients (MFCC)</h2>
                    <p class="graph-description">This graph captures the timbral qualities of speech, where inconsistencies in vocal tract modeling by synthetic voices can reveal deepfakes.</p>
                    <img src="{{ url_for('static', filename=mfcc_path) }}" alt="MFCC">
                </div>
            {% endif %}
            {% if delta_path %}
                <div class="graph-container wide-section">
                    <h2>Delta MFCC</h2>
                    <p class="graph-description">This graph measures the rate of change in speech dynamics, making it useful for spotting the smoother or erratic transitions often present in generated audio.</p>
                    <img src="{{ url_for('static', filename=delta_path) }}" alt="Delta MFCC">
                </div>
            {% endif %}
            {% if f0_path %}
                <div class="graph-container wide-section">
                    <h2>Fundamental Frequency (pitch)</h2>
                    <p class="graph-description">This graph tracks pitch contours, helping detect deepfakes through abnormal or monotonic pitch patterns that differ from natural speech variation.</p>
                    <img src="{{ url_for('static', filename=f0_path) }}" alt="Pitch">
                </div>
            {% endif %}
        {% elif analysis_type == 'physiological' %}
            <h2>Overall Result</h2>
            <h3 style="color: {% if result == 'Real' %}green{% elif result == 'Fake' %}red{% else %}white{% endif %};">
                {{ result }}
            </h3>
            <h2>Counts of Real and Fake Predictions</h2>
            <p>Real: {{ real_count }}, Fake: {{ fake_count }}</p>
            <h2>Average Heart Rate:</h2>
            <p>{{ hr }}</p>

            <div class="graph-container wide-section">
                <h2>Real and Fake Count</h2>
                <p class="graph-description">This graph shows the number of real and fake frames counted during analysis.</p>
                <img src="{{ url_for('static', filename='uploads/results/prediction_counts.png') }}" alt="Original Signal">
            </div>

            <div class="graph-container wide-section">
                <h2>Original Signal</h2>
                <p class="graph-description">This graph shows the raw physiological signals extracted from the facial regions, reflecting the natural variations in signal intensity over time.</p>
                <img src="{{ url_for('static', filename='uploads/results/original_signal.png') }}" alt="Original Signal">
            </div>

            <div class="graph-container wide-section">
                <h2>Filtered Signal</h2>
                <p class="graph-description">This graph represents the filtered version of the original signal, where noise has been reduced to focus on the heart rate-related frequency range.</p>
                <img src="{{ url_for('static', filename='uploads/results/filtered_signal.png') }}" alt="Filtered Signal">
            </div>

            <div class="graph-container wide-section">
                <h2>Heart Rate Distribution</h2>
                <p class="graph-description">This histogram illustrates the distribution of heart rates detected in the signal, helping to understand the consistency and pattern of the detected physiological response.</p>
                <img src="{{ url_for('static', filename='uploads/results/heart_rate_distribution.png') }}" alt="Heart Rate Distribution">
            </div>

            <div class="graph-container wide-section">
                <h2>Prediction Result</h2>
                <p class="graph-description">This image provides the final prediction result, indicating whether the video is classified as real or fake, along with the confidence level of the prediction.</p>
                <img src="{{ url_for('static', filename='uploads/results/prediction_result.png') }}" alt="Prediction Result">
            </div>
        {% elif analysis_type == 'deep_learning' %}
            <h2>Overall Result</h2>
            <h3 style="color: {% if result == 'Real' %}green{% elif result == 'Fake' %}red{% else %}white{% endif %};">
                {{ result }}
            </h3>
            <h2>Counts of Real and Fake Predictions</h2>
            <p>Real: {{ real_count }}, Fake: {{ fake_count }}</p>

            <div class="graph-container wide-section">
                <h2>Frames (Real vs Fake)</h2>
                <p class="graph-description">This graph shows a comparison of frames predicted as real versus fake throughout the video, providing insights into the temporal distribution of predictions.</p>
                <img src="{{ url_for('static', filename='uploads/results/frames_real_vs_fake.png') }}" alt="Frames Real vs Fake">
            </div>

            <div class="graph-container wide-section">
                <h2>Confidence Score Over Time</h2>
                <p class="graph-description">This graph tracks the confidence score of predictions over time, indicating how certain the model was about its predictions at each moment.</p>
                <img src="{{ url_for('static', filename='uploads/results/confidence_score.png') }}" alt="Confidence Score">
            </div>

            {% elif analysis_type == 'deep_learning_static' %}
            <h2>Overall Result</h2>
            <h3 style="color: {% if result == 'Real' %}green{% elif result == 'Fake' %}red{% else %}white{% endif %};">
                {{ result }}
            </h3>
            <h2>Counts of Real and Fake Predictions</h2>
            <p>Real: {{ real_count }}, Fake: {{ fake_count }}</p>

            <div class="graph-container wide-section">
                <h2>Frames (Real vs Fake)</h2>
                <p class="graph-description">This graph shows a comparison of frames predicted as real versus fake throughout the video, providing insights into the temporal distribution of predictions.</p>
                <img src="{{ url_for('static', filename='results/frames_real_vs_fake.png') }}" alt="Frames Real vs Fake">
            </div>

        {% elif analysis_type == 'visual_artifacts' %}
            <div class="wide-section">
                <h2>Overall Result</h2>
                <h3 style="color: {% if result == 'Real' %}green{% elif result == 'Fake' %}red{% else %}white{% endif %};">
                    {{ result }}
                </h3>
                <h2>Counts of Real and Fake Predictions</h2>
                <p>Real: {{ real_count }}, Fake: {{ fake_count }}</p>
            </div>

            <div class="graph-container wide-section">
                <h2>Frames (Real vs Fake)</h2>
                <p class="graph-description">This graph shows a comparison of frames predicted as real versus fake throughout the video, providing insights into the temporal distribution of predictions.</p>
                <img src="{{ url_for('static', filename='uploads/results/real_vs_fake.png') }}" alt="Frames Real vs Fake">
            </div>

            <div class="graph-container wide-section">
                <h2>Confidence Score Over Time</h2>
                <p class="graph-description">This graph tracks the confidence score of predictions over time, indicating how certain the model was about its predictions at each moment.</p>
                <img src="{{ url_for('static', filename='uploads/results/confidence_over_time.png') }}" alt="Confidence Score">
            </div>

            <div class="graph-container wide-section">
                <h2>DNN Feature Norms Over Time</h2>
                <p class="graph-description">This graph shows the norms of DNN (Deep Neural Network) features over time, which can help analyze the robustness and variations in the features extracted from the video frames.</p>
                <img src="{{ url_for('static', filename='uploads/results/dnn_feature_norms_over_time.png') }}" alt="DNN Feature Norms">
            </div>

            <div class="graph-container wide-section">
                <h2>Face Detection Time Over Time</h2>
                <p class="graph-description">This graph displays the time taken to detect faces in each frame over time. It helps understand the performance and speed of the face detection process during the analysis.</p>
                <img src="{{ url_for('static', filename='uploads/results/detection_times_over_time.png') }}" alt="Face Detection Time">
            </div>

            {% elif analysis_type == 'visual_artifact_static' %}
            <div class="wide-section">
                <h2>Overall Result</h2>
                <h3 style="color: {% if result == 'Real' %}green{% elif result == 'Fake' %}red{% else %}white{% endif %};">
                    {{ result }}
                </h3>
                <h2>Counts of Real and Fake Predictions</h2>
                <p>Real: {{ real_count }}, Fake: {{ fake_count }}</p>
            </div>

            <div class="graph-container wide-section">
                <h2>Frames (Real vs Fake)</h2>
                <p class="graph-description">This graph shows a comparison of frames predicted as real versus fake throughout the video, providing insights into the temporal distribution of predictions.</p>
                <img src="{{ url_for('static', filename='results/real_vs_fake.png') }}" alt="Frames Real vs Fake">
            </div>

        {% elif analysis_type == 'body_posture' %}
            <h2>Body Posture Deepfake Detection</h2>
            <p><strong>Prediction:</strong> {{ result }}</p>

        {% elif analysis_type == 'body_posture_live' %}
            <div class="wide-section">
                <h2>Overall Result</h2>
                <h3 style="color: {% if result == 'Real' %}green{% elif result == 'Fake' %}red{% else %}white{% endif %};">
                    {{ result }}
                </h3>
                <h2>Counts of Real and Fake Predictions</h2>
                <p>Real: {{ real_count }}, Fake: {{ fake_count }}</p>
            </div>

            <div class="graph-container wide-section">
                <h2>Frames (Real vs Fake)</h2>
                <p class="graph-description">This graph shows a comparison of frames predicted as real versus fake throughout the video, providing insights into the temporal distribution of predictions.</p>
                <img src="{{ url_for('static', filename='results/frames_real_vs_fake.png') }}" alt="Frames Real vs Fake">
            </div>

        {% elif analysis_type == 'multi_detection' %}
            
        
            {% for method, prediction in results.items() %}
           
                <h3>{{ method.replace("_", " ").title() }} Detection: </h3>
                <p>Prediction: 
                    <strong style="color: {% if prediction == 'Real' %}green{% elif prediction == 'Fake' %}red{% else %}white{% endif %};">
                        {{ prediction }}
                    </strong>
                </p>  <!-- Only "Fake" or "Real" -->
            
            {% endfor %}
        {% endif %}

    </div>
    <footer>
        <div id="footer-placeholder"></div>
    </footer>
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
</body>
</html>
